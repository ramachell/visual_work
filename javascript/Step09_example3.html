<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step09_example3.html</title>
    <style>
        canvas{
            border: 1px solid red;
        }
    </style>

</head>
<body>
    <h1>canvas 요소 활용해 보기</h1>
    <!-- canvas 요소는 width 와 height 를 속성으로 직접 지정할 수 있다. -->
    <canvas id="myCanvas" width="800" height="500"></canvas>
    <script>
        /*
            const constant 의 약자 변수에 한번 담기면 변경불가 (상수화)

            but array나 오브젝트는 좀 다름
            A=[1,2,3,4] 에서 A=[1,2,3] 으로 변경은 안되는데
            A[0] = 5 로 내부값 변경은 가능

            object도 마찬가지
            A={a:1, b:1} A={a:1, b:1, c:6} 는 안되는데
            b 를 3으로 바꾸는건 가능
        */
        
        // canvas 요소의 참조값
        const canvas = document.querySelector("#myCanvas");
        // canvas 에 그림을 그릴 도구 (context) 객체 얻어내기
        const context = canvas.getContext("2d");

        // canvas 에 그릴 이미지 로딩하고
        const snipeImg = new Image;
        snipeImg.src="images/snipe.png"

        const rabbit = new Image;
        rabbit.src = "images/r2.png"
        

        // snipe 의 좌표
        let snipeX = 0, snipeY = 0;

        setInterval(()=>{
            context.clearRect(0,0,800,800);
            context.drawImage(rabbit,300,0,100,100);
            context.drawImage(snipeImg,snipeX-50,snipeY-50,100,100)
            
        }, 2)
        

        // // 이미지 로딩이 완료 되었을때 실행할 함수 등록하기
        // snipeImg.onload=()=>{
        //     // .drawImage(이미지, x, y, width, height)
        //     context.drawImage(snipeImg, 0, 0, 100, 100);
        // }

        // 마우스 지나간후의 이미지 지우고싶으면 배경이미지를 덮어놓고 그린다던지 

        // canvas 요소의 mousemove 
    


        // 
        // canvas.addEventListener("mousemove", (e) => {
        //     const x = e.offsetX;
        //     const y = e.offsetY;
        //     // 마우스 무브될때마다 clearRect로 그려진 이미지 전체삭제 그후 다시 마우스를 그림
        //     context.clearRect(0,0,800,800);
        //     context.drawImage(rabbit,300,0,100,100);
        //     context.drawImage(snipeImg,x-50,y-50,100 ,100);
        // 
        //      이제 이걸 시간마다 반복시키기 위해 setInterval에 등록하려함
        // })

        canvas.addEventListener("mousemove", (e) => {
            snipeX=e.offsetX;
            snipeY=e.offsetY;
        });


    </script>
</body>
</html>